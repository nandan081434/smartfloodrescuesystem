<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Citizen Home | Flood Rescue</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    height:100vh;
    overflow:hidden;
}

/* MAP FULL SCREEN */
#map{
    height:100vh;
    width:100vw;
}

/* FLOATING SIDEBAR */
.sidebar{
    position:absolute;
    top:20px;
    left:20px;
    width:200px;
    display:flex;
    flex-direction:column;
    gap:20px;
    z-index:1000;
}

/* TITLE */
.app-title{
    color:#0ea5e9;
    font-size:18px;
    font-weight:600;
    text-align:center;
    margin-bottom:10px;
}

/* FLOATING BUTTONS */
.menu-btn,
.menu-item{
    height:64px;
    border:none;
    border-radius:22px;
    font-size:16px;
    cursor:pointer;
    display:flex;
    align-items:center;
    gap:14px;
    padding-left:22px;
    color:#fff;

    background:rgba(15,23,42,0.85);
    backdrop-filter:blur(12px);
    box-shadow:0 10px 26px rgba(0,0,0,0.45);

    transition:0.3s;
}

/* PROFILE ITEM FIX */
.menu-item p{
    margin:0;
}

.menu-btn:hover,
.menu-item:hover{
    transform:translateX(6px) scale(1.03);
    background:#2563eb;
}

/* ICON */
.icon{
    font-size:22px;
}

/* SOS */
.sos{
    background:#b91c1c;
    font-weight:600;
}

.sos:hover{
    background:#dc2626;
}

/* TOP MESSAGE */
.top-info{
    position:absolute;
    top:20px;
    left:260px;
    background:rgba(0,0,0,0.75);
    color:white;
    padding:14px 26px;
    border-radius:18px;
    z-index:1000;
    font-size:14px;
    animation:fadeOut 2s forwards;
}

@keyframes fadeOut{
    0%{opacity:1;}
    70%{opacity:1;}
    100%{opacity:0; visibility:hidden;}
}
</style>
</head>

<body>

<!-- ‚úÖ LOGIN SUCCESS BAR (ADDED) -->
<div id="loginSuccessBar" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: #16a34a;
  color: white;
  text-align: center;
  padding: 14px;
  font-weight: 600;
  display: none;
  z-index: 9999;
">
</div>

<!-- MAP -->
<div id="map"></div>

<!-- FLOATING SIDEBAR -->
<div class="sidebar">
    <div class="app-title">üåä Flood Rescue</div>

    <div class="menu-item" onclick="openProfile()">
        <span class="icon">üë§</span>
        <p>Profile</p>
    </div>

    <button class="menu-btn">
        <span class="icon">üí°</span> Suggestion Box
    </button>

    <button class="menu-btn">
        <span class="icon">üè†</span> Home
    </button>

    <button class="menu-btn sos">
        <span class="icon">üö®</span> SOS
    </button>

    <button class="menu-btn">
        <span class="icon">üîî</span> Alerts
    </button>
</div>

<!-- MESSAGE -->
<div class="top-info" id="topInfo">
    üìç Your live location is being tracked
</div>

<script>
/* MAP */
const map = L.map('map').setView([18.3221, 78.3033], 14);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

L.marker([18.3221, 78.3033])
 .addTo(map)
 .bindPopup("üìç Your location")
 .openPopup();

/* REMOVE MESSAGE AFTER 2 SECONDS */
setTimeout(()=>{
    const msg=document.getElementById("topInfo");
    if(msg) msg.remove();
},2000);

/* ‚úÖ PROFILE NAVIGATION */
function openProfile() {
    window.location.href = "profile.html";
}

/* ‚úÖ SHOW LOGIN SUCCESS WITH REAL EMAIL (ADDED) */
const floodUser = JSON.parse(localStorage.getItem("floodUser"));

if (floodUser && floodUser.email) {
    const bar = document.getElementById("loginSuccessBar");
    bar.innerText = `‚úÖ Logged in successfully as ${floodUser.email}`;
    bar.style.display = "block";

    setTimeout(() => {
        bar.style.display = "none";
    }, 2000);
}
</script>

</body>
</html>
